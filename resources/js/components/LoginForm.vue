<template>
  <div>
    <form-group label="Email Address">
      <input type="email" class="form-control" v-model="email" />
    </form-group>
    <form-group label="Password">
      <input type="password" class="form-control" v-model="password" />
    </form-group>
    <button class="btn btn-primary" @click="login">Login</button>
  </div>
</template>
<script>
import Vue from 'vue'
import VueCookies from 'vue-cookies'
Vue.use(VueCookies)
export default {
  data() {
    return {
      email: null,
      password: null
    };
  },
  methods: {
    login() {
      console.log(this.email, this.password);
      const login_url = "/api/v1/login/";
      const bodyData = new FormData();
      bodyData.set("email", this.email);
      bodyData.set("password", this.password);
      const payLoad = {
        email: this.email,
        password: this.password
      };
      axios({
        method: "POST",
        url: login_url,
        data: payLoad
      }).then(response => {
        Vue.$cookies.set("token",response.data.api_token);
      });
    }
  }
};
</script>